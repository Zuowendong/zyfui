@import "@/style/base/inset.css";
@import "@/style/base/method.css";

.cyberpunk-button {
    --path: polygon(
        0 0,
        100% 0,
        100% 100%,
        100% 100%,
        100% 84%,
        82% 84%,
        82% 100%,
        15% 100%,
        0 75%
    );

    --border-width: rem(-4px);
    --border-color: var(--blue);
    /* --bg: var(--red);
    --glitch-text: ""; */

    @mixin inset-button;
    padding: rem(20px 26px);
    background-color: var(--red);
    /* background: linear-gradient(222deg, red 90%, transparent 10%); */
    clip-path: var(--path);
    position: relative;
    font-size: rem(20px);
    color: var(--white);
    letter-spacing: var(--small);
}

.cyberpunk-button::before {
    @mixin absolute;
    z-index: -1;
    background-color: var(--bg);
    clip-path: var(--path);
    transform: translate(var(--border-width));
}

.cyberpunk-button::after {
    @mixin absolute;
    z-index: -2;
    clip-path: var(--path);
    background-color: var(--border-color);
}

.cyberpunk-button:hover .cyberpunk-button_glitch {
    opacity: 1;
    animation: Glitch 2s infinite;
}

/* cyberpunk-button_glitch */
.cyberpunk-button_glitch {
    --slice-0: polygon(0 2%, 100% 2%, 100% 95%, 0% 95%);
    --slice-1: polygon(0 75%, 100% 75%, 100% 100%, 0 100%);
    --slice-2: polygon(0 40%, 100% 40%, 95% 50%, 0 50%);
    --slice-3: polygon(0 0, 100% 0, 100% 18%, 85% 22%, 0, 22%);
    --slice-4: polygon(0 0, 85% 0, 100% 18%, 100% 100%, 0 100%);
    --slice-5: polygon(0 40%, 100% 40%, 100% 75%, 85% 85%, 0 85%);
    --slice-6: polygon(0 60%, 100% 60%, 100% 80%, 85% 85%, 0 85%);
    --slice-7: polygon(0 30%, 100% 30%, 100% 55%, 30% 55%, 0 45%);

    @mixin absolute;
    @mixin center;
    opacity: 0;
}

.cyberpunk-button_glitch::before {
    @mixin absolute;
    @mixin center;
    z-index: 0;
    content: var(--glitch-text);
    background-color: var(--bg);
    transform: translateX calc(-1 * var(--border-width));
}

.cyberpunk-button_glitch::after {
    @mixin absolute;
    @mixin center;
    z-index: -1;
    background-color: var(--border-color);
}

/* cyberpunk-button_tag */
.cyberpunk-button_tag {
    position: absolute;
    right: 0;
    bottom: 10px;
    font-size: rem(10px);
    letter-spacing: 0;
    background-color: var(--black);
    color: var(--yellow);
    padding: 0 var(--mini);
    border-left: 2px solid var(--gray);
}

.cyberpunk-button:hover .cyberpunk-button_tag {
    opacity: 1;
    animation: Glitch 1.65s infinite;
}

/* ANIMATION */
@keyframes Glitch {
    0% {
        clip-path: var(--slice-0);
        transform: translateY(var(--small));
    }

    4% {
        clip-path: var(--slice-1);
        transform: translateY(var(--small)) translateX(var(--small));
    }

    8% {
        clip-path: var(--slice-1);
        transform: translateY(var(--small));
    }

    12% {
        clip-path: var(--slice-2);
        transform: translateY(var(--small)) translateX(var(--small));
    }

    18% {
        clip-path: var(--slice-3);
        transform: translateY(var(--small));
    }

    25% {
        clip-path: var(--slice-4);
        transform: translateY(var(--small)) translateX(calc(var(--mini) * -1));
    }

    27% {
        clip-path: var(--slice-4);
        transform: translateY(var(--small)) translateX(var(--mini));
    }

    31% {
        clip-path: var(--slice-5);
        transform: translateY(var(--small));
    }

    35% {
        clip-path: var(--slice-5);
        transform: translateY(var(--small)) translateX(var(--small));
    }

    40% {
        clip-path: var(--slice-5);
        transform: translateY(var(--small)) translateX(var(--normal));
    }

    45% {
        clip-path: var(--slice-5);
        transform: translateY(var(--small));
    }

    50% {
        clip-path: var(--slice-7);
    }

    55% {
        clip-path: var(--slice-6);
        transform: translateY(var(--small)) translateX(var(--mini));
    }

    60% {
        clip-path: var(--slice-6);
    }

    65% {
        clip-path: var(--slice-7);
        transform: translateY(var(--small)) translateX(calc(var(--small) * -1));
    }

    70% {
        clip-path: var(--slice-3);
        transform: translateY(var(--small)) translateX(calc(var(--mini) * -1));
    }

    100% {
        clip-path: var(--slice-2);
    }
}
